<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .test { margin: 20px 0; padding: 15px; border: 2px solid #ccc; border-radius: 8px; }
        .pass { color: green; font-weight: bold; }
        .fail { color: red; font-weight: bold; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Verificación de Carrito y Botón Móvil</h1>
    
    <div class="test">
        <h3>1. Carrito de compras (sidebar)</h3>
        <p id="sidebar-status">Cargando...</p>
        <p id="sidebar-open-status">Cargando...</p>
    </div>
    
    <div class="test">
        <h3>2. Botón móvil fijo</h3>
        <p id="mobile-panel-status">Cargando...</p>
        <p id="mobile-button-status">Cargando...</p>
    </div>
    
    <div class="test">
        <h3>3. Interacciones</h3>
        <button onclick="testOpenCart()">Abrir carrito</button>
        <button onclick="testCloseCart()">Cerrar carrito</button>
        <button onclick="testMobileButton()">Probar botón móvil</button>
    </div>
    
    <div class="test">
        <h3>4. Pantalla actual</h3>
        <p id="screen-size">Cargando...</p>
        <p id="breakpoint-status">Cargando...</p>
    </div>
    
    <script>
        function checkSidebar() {
            const sidebar = document.querySelector('.cart-sidebar');
            if (sidebar) {
                document.getElementById('sidebar-status').innerHTML = 
                    '<span class="pass">✓ ENCONTRADO</span> - Selector: .cart-sidebar';
                
                const isOpen = sidebar.classList.contains('open');
                document.getElementById('sidebar-open-status').innerHTML = 
                    `Estado: ${isOpen ? '<span class="fail">ABIERTO</span>' : '<span class="pass">CERRADO</span>'}`;
                
                const style = window.getComputedStyle(sidebar);
                const display = style.display;
                const position = style.position;
                
                return { found: true, isOpen, display, position };
            } else {
                document.getElementById('sidebar-status').innerHTML = 
                    '<span class="fail">✗ NO ENCONTRADO</span> - No existe .cart-sidebar';
                return { found: false };
            }
        }
        
        function checkMobilePanel() {
            const mobilePanel = document.getElementById('mobile-product-info');
            if (mobilePanel) {
                document.getElementById('mobile-panel-status').innerHTML = 
                    '<span class="pass">✓ ENCONTRADO</span> - ID: mobile-product-info';
                
                const style = window.getComputedStyle(mobilePanel);
                const display = style.display;
                const position = style.position;
                
                document.getElementById('mobile-panel-status').innerHTML += 
                    ` | Display: ${display} | Position: ${position}`;
                
                // Check mobile button
                const mobileButton = document.getElementById('mobileAddToCart');
                if (mobileButton) {
                    const rect = mobileButton.getBoundingClientRect();
                    document.getElementById('mobile-button-status').innerHTML = 
                        `<span class="pass">✓ BOTÓN ENCONTRADO</span> | Tamaño: ${rect.width}x${rect.height}px`;
                } else {
                    document.getElementById('mobile-button-status').innerHTML = 
                        '<span class="fail">✗ BOTÓN NO ENCONTRADO</span>';
                }
                
                return { found: true, display, position };
            } else {
                document.getElementById('mobile-panel-status').innerHTML = 
                    '<span class="fail">✗ NO ENCONTRADO</span> - No existe #mobile-product-info';
                return { found: false };
            }
        }
        
        function testOpenCart() {
            const sidebar = document.querySelector('.cart-sidebar');
            if (sidebar) {
                sidebar.classList.add('open');
                checkSidebar();
                alert('Carrito abierto (debería verse a la derecha)');
            }
        }
        
        function testCloseCart() {
            const sidebar = document.querySelector('.cart-sidebar');
            if (sidebar) {
                sidebar.classList.remove('open');
                checkSidebar();
                alert('Carrito cerrado');
            }
        }
        
        function testMobileButton() {
            const mobileButton = document.getElementById('mobileAddToCart');
            if (mobileButton) {
                const originalText = mobileButton.innerHTML;
                mobileButton.innerHTML = '¡FUNCIONA!';
                mobileButton.style.background = '#00c853';
                setTimeout(() => {
                    mobileButton.innerHTML = originalText;
                    mobileButton.style.background = '';
                }, 1000);
                alert('Botón móvil funciona');
            }
        }
        
        function checkScreen() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            document.getElementById('screen-size').innerHTML = 
                `Tamaño: ${width}x${height}px`;
            
            let breakpoint = 'Desktop (>1100px)';
            if (width <= 480) {
                breakpoint = 'Móvil pequeño (≤480px)';
            } else if (width <= 768) {
                breakpoint = 'Tablet (≤768px)';
            } else if (width <= 1100) {
                breakpoint = 'Móvil grande (≤1100px)';
            }
            
            document.getElementById('breakpoint-status').innerHTML = 
                `Breakpoint actual: ${breakpoint}`;
        }
        
        // Run checks
        checkSidebar();
        checkMobilePanel();
        checkScreen();
        
        // Update on resize
        window.addEventListener('resize', () => {
            checkScreen();
            checkSidebar();
            checkMobilePanel();
        });
    </script>
</body>
</html>