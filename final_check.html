<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificaci√≥n Papaty</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .test { border: 1px solid #ccc; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .pass { color: green; font-weight: bold; }
        .fail { color: red; font-weight: bold; }
        .warning { color: orange; font-weight: bold; }
        pre { background: #f5f5f5; padding: 10px; overflow: auto; }
    </style>
</head>
<body>
    <h1>Verificaci√≥n de Papaty</h1>
    <p>Esta p√°gina verifica los elementos cr√≠ticos de la aplicaci√≥n Papaty.</p>
    
    <div class="test">
        <h2>1. Estado actual del viewport</h2>
        <p id="viewport-info">Cargando...</p>
        <button onclick="updateViewportInfo()">Actualizar</button>
    </div>
    
    <div class="test">
        <h2>2. Elementos del DOM</h2>
        <div id="dom-check-results"></div>
    </div>
    
    <div class="test">
        <h2>3. CSS aplicado</h2>
        <div id="css-check-results"></div>
    </div>
    
    <div class="test">
        <h2>4. JavaScript</h2>
        <div id="js-check-results"></div>
        <button onclick="testJS()">Probar funcionalidad JS</button>
    </div>
    
    <div class="test">
        <h2>5. Soluci√≥n de problemas</h2>
        <ol>
            <li><strong>Hard Refresh</strong>: Presiona <kbd>Ctrl+Shift+R</kbd> (Windows/Linux) o <kbd>Cmd+Shift+R</kbd> (Mac)</li>
            <li><strong>Verifica el tama√±o de ventana</strong>: Debe ser ‚â§1100px para ver el bot√≥n m√≥vil</li>
            <li><strong>Abre la consola</strong>: Presiona <kbd>F12</kbd> y revisa la pesta√±a "Console" por errores</li>
            <li><strong>Prueba en modo m√≥vil</strong>: En DevTools, haz clic en el √≠cono de dispositivo m√≥vil (üì±)</li>
        </ol>
    </div>
    
    <script>
        function updateViewportInfo() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const isMobile = width <= 1100;
            
            let breakpoint = 'Desktop (>1100px)';
            if (width <= 480) breakpoint = 'M√≥vil peque√±o (‚â§480px)';
            else if (width <= 768) breakpoint = 'Tablet (‚â§768px)';
            else if (width <= 1100) breakpoint = 'M√≥vil grande (‚â§1100px)';
            
            document.getElementById('viewport-info').innerHTML = `
                <span class="${isMobile ? 'pass' : 'warning'}">${width}√ó${height}px - ${breakpoint}</span><br>
                <small>El bot√≥n m√≥vil ${isMobile ? 'DEBER√çA' : 'NO DEBER√çA'} ser visible (se muestra en ‚â§1100px)</small>
            `;
            
            checkDOM();
            checkCSS();
            checkJS();
        }
        
        function checkDOM() {
            const elements = [
                { id: 'cartSidebar', desc: 'Carrito de compras (sidebar)' },
                { id: 'mobile-product-info', desc: 'Panel m√≥vil fijo' },
                { id: 'mobileCartToggle', desc: '√çcono de carrito m√≥vil' },
                { id: 'mobileAddToCart', desc: 'Bot√≥n "Seleccionar art√≠culo" m√≥vil' },
                { id: 'mobileFinalPrice', desc: 'Precio final m√≥vil' },
                { id: 'cartToggle', desc: '√çcono de carrito desktop (header)' },
                { id: 'addToCart', desc: 'Bot√≥n "Seleccionar art√≠culo" desktop' }
            ];
            
            let results = '<table style="width:100%"><tr><th>Elemento</th><th>Estado</th><th>ID</th></tr>';
            
            elements.forEach(el => {
                const elem = document.getElementById(el.id);
                const found = !!elem;
                results += `<tr>
                    <td>${el.desc}</td>
                    <td><span class="${found ? 'pass' : 'fail'}">${found ? '‚úì Encontrado' : '‚úó No encontrado'}</span></td>
                    <td><code>#${el.id}</code></td>
                </tr>`;
            });
            
            results += '</table>';
            document.getElementById('dom-check-results').innerHTML = results;
        }
        
        function checkCSS() {
            const mobilePanel = document.getElementById('mobile-product-info');
            const cartSidebar = document.querySelector('.cart-sidebar');
            
            let results = '<h3>Panel m√≥vil (#mobile-product-info)</h3>';
            
            if (mobilePanel) {
                const style = window.getComputedStyle(mobilePanel);
                results += `<ul>
                    <li>display: <code>${style.display}</code> ${style.display === 'none' ? '<span class="warning">(oculto por defecto)</span>' : '<span class="pass">(visible)</span>'}</li>
                    <li>position: <code>${style.position}</code></li>
                    <li>bottom: <code>${style.bottom}</code></li>
                    <li>z-index: <code>${style.zIndex}</code></li>
                </ul>`;
            } else {
                results += '<p class="fail">No encontrado en el DOM</p>';
            }
            
            results += '<h3>Carrito (.cart-sidebar)</h3>';
            
            if (cartSidebar) {
                const style = window.getComputedStyle(cartSidebar);
                results += `<ul>
                    <li>position: <code>${style.position}</code></li>
                    <li>right: <code>${style.right}</code></li>
                    <li>width: <code>${style.width}</code></li>
                    <li>Estado: <span class="${cartSidebar.classList.contains('open') ? 'pass' : 'warning'}">${cartSidebar.classList.contains('open') ? 'Abierto' : 'Cerrado'}</span></li>
                </ul>`;
            } else {
                results += '<p class="fail">No encontrado en el DOM</p>';
            }
            
            document.getElementById('css-check-results').innerHTML = results;
        }
        
        function checkJS() {
            const results = `
                <p>Variables globales de JavaScript:</p>
                <ul>
                    <li>window.productos: ${window.productos ? `Array con ${window.productos.length} elementos` : 'No definido'}</li>
                    <li>window.carrito: ${window.carrito ? `Array con ${window.carrito.length} elementos` : 'No definido'}</li>
                    <li>window.productoActual: ${window.productoActual !== undefined ? window.productoActual : 'No definido'}</li>
                </ul>
                <p>Nota: Estas variables solo estar√°n disponibles despu√©s de que se cargue script.js</p>
            `;
            
            document.getElementById('js-check-results').innerHTML = results;
        }
        
        function testJS() {
            // Try to open cart
            const cartSidebar = document.querySelector('.cart-sidebar');
            const mobileCartToggle = document.getElementById('mobileCartToggle');
            
            if (cartSidebar && mobileCartToggle) {
                // Open cart
                cartSidebar.classList.add('open');
                alert('Carrito abierto. Deber√≠a verse desliz√°ndose desde la derecha.');
                
                // Close after 2 seconds
                setTimeout(() => {
                    cartSidebar.classList.remove('open');
                    alert('Carrito cerrado.');
                }, 2000);
            } else {
                alert('Elementos no encontrados. Verifica la consola para errores.');
            }
        }
        
        // Initial check
        updateViewportInfo();
        
        // Update on resize
        window.addEventListener('resize', updateViewportInfo);
    </script>
</body>
</html>